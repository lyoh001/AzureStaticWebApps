<html>

<head>
    <link href="/mlcoffeeplantdiseases/styles.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <title>Coffee Plant Diseases</title>
</head>

<body onload="load()">
    <script>
        function load() {
            var http = new XMLHttpRequest();
            http.open("POST", "api/mlload", true);
            http.setRequestHeader("Content-Type", "application/json");
            http.onreadystatechange = function () {
                var response = http.responseText
                document.getElementById("prediction").innerHTML = "Ready.";
            }
            http.send();
        }
    </script>
    <header id="dashboard">
        <h1><b>COFFEE PLANT</b> DISEASES</h1>
        <hr>
        Coffee Plant Diseases AI Detection System powered by Convolutional Neural Network
        <hr>
    </header>
    <main>
        <article id="mainLeft">
            <section>
                <h2>CODE</h2>
                <p>
                    <i class="fab fa-github" aria-hidden="true"></i>
                    <a
                        href="https://github.com/lyoh001/AzureStaticWebApps/blob/main/mlcoffeeplantdiseases/notebook/notebook.ipynb">Mobilenet_v2
                        Classification Analysis</a>
                </p>
            </section>
            <section>
                <h2>DESIGN</h2>
                <p>
                    <i class="fab fa-github" aria-hidden="true"></i>
                    <a href="https://github.com/lyoh001/AzureFunctions">Azure Static Web Apps with Function Integration
                        Design</a>
                </p>
            </section>
        </article>
        <article id="mainRight">
            <section>
                <h2>PROBLEM STATEMENT</h2>
                <p>The Ethiopian Coffee and Tea Authority reported that Arabica coffee is affected by three major fungal
                    diseases which greatly impact production and consumption in the country. However, the current method
                    of observing these diseases with the naked eye is labor-intensive, costly, and requires expert
                    knowledge. To address this, it is crucial to develop a way to identify these diseases automatically.
                    One solution is to utilize deep learning, object detection, and image classification to detect
                    various types of coffee plant diseases caused by pests and pathogens.
                </p>
            </section>
            <section>
                <h2>COFFEE PLANT DISEASES AI DETECTION</h2>
                <p>
                    Please select one of the coffee leaf images below and click predict to continue.
                </p>
                <ol>
                    <li><label for="feature1">Coffee Leaf Images (1-240)</label></li>
                    <div class="slider">
                        <p>
                            <img src="/mlcoffeeplantdiseases/images/1.jpg" style="height: 30%; width: 30%" id="img" />
                        </p>
                        <p>Image ID: <span id="feature1_output"></span></p>
                        <input type="range" min="1" max="240" value="1" step="1" class="slider" id="feature1">
                    </div>
                    <script>
                        var slider = document.getElementById("feature1");
                        var output = document.getElementById("feature1_output");
                        output.innerHTML = slider.value;

                        slider.oninput = function () {
                            output.innerHTML = this.value;
                            document.getElementById("img").src = "/mlcoffeeplantdiseases/images/" + slider.value + ".jpg";
                        }
                    </script>
                    <button
                        onclick="document.getElementById('prediction').innerHTML = 'Thinking...'; predict();">predict</button>
                </ol>
                <p>Prediction: <b style="color:#DDB892" id="prediction">Initializing AI. May take up to 30 seconds.
                        Please wait.</b></p>
                <script>
                    function predict() {
                        var feature1 = document.getElementById("feature1").value;
                        var http = new XMLHttpRequest();
                        http.open("POST", "api/mlcoffeeplantdiseases", true);
                        http.setRequestHeader("Content-Type", "application/json");
                        http.onreadystatechange = function () {
                            if (http.readyState == 4 && http.status == 200) {
                                var response = http.responseText
                                document.getElementById("prediction").innerHTML = response;
                            }
                        }
                        http.send(JSON.stringify({ "image_id": [feature1] }));
                    }
                </script>
            </section>
        </article>
    </main>
    <footer id="footer">
        <hr>
        <ul class="social">
            <li><a href="https://github.com/lyoh001"><i class="fab fa-github"></i></a></li>
            <li><a href="https://linkedin.com/in/lyoh001"><i class="fab fa-linkedin"></i></a></li>
            <li><a href="https://lyoh001.com"><i class="fa fa-home"></i></a></li>
            <li><a href="mailto:lyoh001@gmail.com"><i class="fa fa-envelope"></i></a></li>
        </ul>
    </footer>
</body>

</html>