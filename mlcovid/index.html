<html>

<head>
    <link href="/mlcovid/styles.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <title>Covid Xray</title>
</head>

<body onload="load()">
    <script>
        function load() {
            var http = new XMLHttpRequest();
            http.open("POST", "api/mlload", true);
            http.setRequestHeader("Content-Type", "application/json");
            http.onreadystatechange = function () {
                var response = http.responseText
                document.getElementById("prediction").innerHTML = response;
            }
            http.send(JSON.stringify({ "data": "load" }));
        }
    </script>

    <header id="dashboard">
        <h1><b>COVID</b> XRAY</h1>
        <hr>
        Covid Xray AI Detection System powered by Convolutional Neural Network
        <hr>
    </header>
    <main>
        <article id="mainLeft">
            <section>
                <h2>CODE</h2>
                <p>
                    <i class="fab fa-github" aria-hidden="true"></i>
                    <a
                        href="https://github.com/lyoh001/AzureStaticWebApps/blob/main/mlcovid/notebook/notebook_mobilenet_v2.ipynb">Mobilenet_v2
                        Classification Analysis</a>
                </p>
                <p>
                    <i class="fab fa-github" aria-hidden="true"></i>
                    <a
                        href="https://github.com/lyoh001/AzureStaticWebApps/blob/main/mlcovid/notebook/notebook_cnn.ipynb">CNN
                        Classification Analysis</a>
                </p>
            </section>
            <section>
                <h2>DESIGN</h2>
                <p>
                    <i class="fab fa-github" aria-hidden="true"></i>
                    <a href="https://github.com/lyoh001/AzureFunctions">Azure Static Web Apps with Function Integration
                        Design</a>
                </p>
            </section>
            <section>
                <h2>PROJECT</h2>
                <p>
                    <i class="fa fa-home" aria-hidden="true"></i>
                    <a href="https://github.com/lyoh001/DLCovid19">Covid19 Xray Image Classification</a>
                </p>
                <p></p>
            </section>
        </article>
        <article id="mainRight">
            <section>
                <h2>PROBLEM STATEMENT</h2>
                <p>COVID-19 is confirmed using PCR and can present on chest X-rays and CT images with a moderate
                    characteristic pattern. The rate of transmission depends on the ability to identify infected
                    patients with low rates of false negatives and false positives. Timely detection and proper
                    infection control are crucial for supporting patients. A Chinese team found that patients show
                    abnormalities on chest CT images, with most having bilateral involvement. ICU patients typically
                    have bilateral lobular and subsegmental areas of consolidation on admission, while non-ICU patients
                    have bilateral ground-glass opacity and subsegmental areas of consolidation. Later CT images of
                    non-ICU patients display bilateral ground-glass opacity with resolved consolidation. COVID-19 is
                    possibly better diagnosed using radiological imaging.
                </p>
            </section>
            <section>
                <h2>COVID XRAY AI DETECTION</h2>
                <p>
                    Please select one of the xray images below and click predict to continue.
                </p>
                <ol>
                    <li><label for="feature1">Xray Images (1-30)</label></li>
                    <div class="slider">
                        <p>
                            <img src="/mlcovid/images/1.jpg" style="height: 30%; width: 30%" id="img" />
                        </p>
                        <p>Image ID: <span id="feature1_output"></span></p>
                        <input type="range" min="1" max="30" value="1" step="1" class="slider" id="feature1">
                    </div>
                    <script>
                        var slider = document.getElementById("feature1");
                        var output = document.getElementById("feature1_output");
                        output.innerHTML = slider.value;

                        slider.oninput = function () {
                            output.innerHTML = this.value;
                            document.getElementById("img").src = "/mlcovid/images/" + slider.value + ".jpg";
                        }
                    </script>
                    <button
                        onclick="document.getElementById('prediction').innerHTML = 'Computing the prediction. It may take up to 10 seconds during the process.'; predict();">predict</button>
                </ol>
                <p>Radiology Report: <b style="color:#AA5EFF" id="prediction">...</b></p>
                <script>
                    function predict() {
                        var feature1 = document.getElementById("feature1").value;
                        var http = new XMLHttpRequest();
                        http.open("POST", "api/mlcovid", true);
                        http.setRequestHeader("Content-Type", "application/json");
                        http.onreadystatechange = function () {
                            if (http.readyState == 4 && http.status == 200) {
                                var response = http.responseText
                                document.getElementById("prediction").innerHTML = response;
                            }
                        }
                        http.send(JSON.stringify({ "image_id": [feature1] }));
                    }
                </script>
            </section>
        </article>
    </main>
    <footer id="footer">
        <hr>
        <ul class="social">
            <li><a href="https://github.com/lyoh001"><i class="fab fa-github"></i></a></li>
            <li><a href="https://linkedin.com/in/lyoh001"><i class="fab fa-linkedin"></i></a></li>
            <li><a href="https://lyoh001.com"><i class="fa fa-home"></i></a></li>
            <li><a href="mailto:lyoh001@gmail.com"><i class="fa fa-envelope"></i></a></li>
        </ul>
    </footer>
</body>

</html>